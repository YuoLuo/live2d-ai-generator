# Live2D AI Generator

<div align="center">
  <img src="docs/assets/logo.png" alt="Live2D AI Generator Logo" width="200"/>
  <h3>利用人工智能技术将2D角色图像转换为动态Live2D模型</h3>
</div>

## 📋 目录

- [项目概述](#项目概述)
- [核心功能](#核心功能)
- [系统要求](#系统要求)
- [安装指南](#安装指南)
- [快速开始](#快速开始)
- [详细使用说明](#详细使用说明)
- [AI模型说明](#ai模型说明)
- [项目结构](#项目结构)
- [常见问题](#常见问题)
- [更新日志](#更新日志)
- [贡献指南](#贡献指南)
- [许可证](#许可证)

## 🌟 项目概述

Live2D AI Generator 是一个创新的工具，它结合了最先进的AI技术与Live2D模型创建流程，使创作者能够轻松地将2D角色图像转换为具有丰富表情和动作的Live2D模型。无论您是经验丰富的动画师还是刚接触Live2D的初学者，本工具都能大幅简化制作过程，节省大量时间。

本项目的目标是降低Live2D创作的技术门槛，让更多人能够创作出高质量的Live2D模型用于游戏、虚拟主播、演示或其他交互式应用。

## ✨ 核心功能

### 角色生成
- 使用多种StableDiffusion模型生成高质量角色立绘
- 支持自定义提示词、风格和姿势
- 多样化的角色生成选项和参数调整

### 图层自动分离
- 使用先进的图像分割算法(SAM, U2NET)自动分离角色的各个部位
- 智能识别并分离面部、眼睛、嘴巴、头发、身体等组件
- 高质量图层输出，为Live2D模型制作奠定基础

### Cubism自动化交互
- 与Live2D Cubism软件自动交互
- 自动导入分离的图层
- 设置基础参数和结构

### 参数自动生成
- 自动创建眨眼、嘴部动画和呼吸效果
- 生成自然的物理效果，如头发和衣物摆动
- 可定制的参数复杂度设置

### 模型导出
- 支持多种格式导出，包括moc3和model3.json
- 适配多平台使用的输出优化
- 直接获取可用于集成的完整模型

### 用户友好界面
- 直观的Gradio图形界面
- 一键式生成工作流程
- 详细的状态更新和进度指示
- 内置模型下载和管理功能

## 💻 系统要求

- **操作系统**: Windows 10/11, macOS 10.15+, Ubuntu 20.04+
- **Python版本**: 3.8以上
- **硬件要求**:
  - **CPU**: 多核处理器
  - **内存**: 最小8GB RAM，推荐16GB或更高
  - **GPU**: 支持CUDA的NVIDIA GPU (至少6GB VRAM)用于加速处理
  - **存储**: 至少20GB可用空间(模型下载需要额外空间)
- **软件要求**:
  - Live2D Cubism Editor 4.0或更高版本

## 🔧 安装指南

### 方法一：使用安装脚本(推荐)

1. 克隆仓库：
```bash
git clone https://github.com/your-username/live2d-ai-generator.git
cd live2d-ai-generator
```

2. 运行安装脚本：

```bash
# Windows
.\run.bat

# macOS/Linux
chmod +x run.sh
./run.sh
```

脚本会自动创建虚拟环境并安装所有必要的依赖。

### 方法二：手动安装

1. 克隆仓库：
```bash
git clone https://github.com/your-username/live2d-ai-generator.git
cd live2d-ai-generator
```

2. 创建并激活虚拟环境：
```bash
python -m venv venv

# Windows
.\venv\Scripts\activate

# macOS/Linux
source venv/bin/activate
```

3. 安装依赖：
```bash
pip install -r requirements.txt
```

4. 配置设置：
   - 打开 `config.yml` 文件
   - 设置 Cubism 可执行文件路径
   - 调整输出目录和其他首选项

## 🚀 快速开始

1. 启动应用程序：
```bash
python gui_run.py
```

2. 在浏览器中打开显示的本地URL（通常是 http://127.0.0.1:7860）

3. 首次使用时：
   - 进入"配置设置"标签页
   - 设置Cubism可执行文件路径
   - 选择并下载您想使用的AI模型

4. 一键生成模型：
   - 上传角色图像或使用提示词生成新角色
   - 配置生成参数
   - 点击"开始生成"按钮
   - 等待处理完成
   - 在输出文件夹查看生成的Live2D模型

## 📖 详细使用说明

### 主界面介绍

应用程序界面分为四个主要标签页：

#### 一键生成

最简单的使用方式，包含以下主要部分：

1. **输入选项**
   - 上传现有角色图像（建议使用正面或3/4视角的角色图像）
   - 或使用AI生成新角色

2. **角色生成参数**
   - **提示词**: 详细描述您想要生成的角色
   - **负面提示词**: 指定不想出现的元素
   - **AI模型**: 选择用于生成的模型
   - **风格**: 选择动漫、写实、卡通或素描风格
   - **姿势**: 选择前视图、3/4视图或侧面视图
   - **分辨率**: 从512x512到1536x1536不等
   - **样本数量**: 生成的图像数量(1-8)
   - **随机种子**: 用于可重复生成的种子值(-1为随机)

3. **图层分割参数**
   - **分割模型**: 选择Segment Anything或U2Net
   - **分割质量**: 低、中或高质量设置
   - **部位选择**: 选择需要分割的具体部位

4. **导出参数**
   - **物理效果**: 是否包含物理模拟
   - **导出格式**: 选择moc3或model3.json

5. **操作按钮**
   - 开始生成: 启动完整处理流程
   - 下载选定模型: 下载选择的AI模型
   - 查看帮助: 显示使用指南

6. **输出区域**
   - 处理状态: 显示当前进度和状态消息
   - 图层预览: 显示分割后的图层
   - 导出结果: 显示最终模型的位置

#### 分步执行(开发中)

将允许用户精细控制每个处理步骤的高级功能。

#### 配置设置

用于配置应用程序的全局设置：

1. **AI模型设置**
   - 选择默认AI模型
   - 下载模型按钮和状态显示

2. **Cubism设置**
   - 设置Cubism可执行文件路径

3. **输出设置**
   - 配置输出目录位置

4. **GPU设置**
   - 启用或禁用GPU加速

#### 关于

包含项目信息、功能概述和使用提示。

### 工作流程详解

1. **准备阶段**
   - 确保已正确设置Cubism路径
   - 下载所需的AI模型
   - 准备角色图像或详细的提示词

2. **生成角色**
   - 上传现有图像或使用AI生成新角色
   - AI生成时，可通过提示词、风格和姿势调整生成效果

3. **图层分割**
   - 系统自动将角色图像分割为多个图层
   - 分割质量和模型选择会影响结果精度

4. **Cubism自动化**
   - 系统自动与Cubism软件交互
   - 导入图层并设置初始参数

5. **参数生成**
   - 自动生成眨眼、嘴部动画和其他必要参数
   - 根据设置添加物理效果

6. **模型导出**
   - 将完成的模型导出为选定格式
   - 导出的模型可以直接用于其他应用

## 🤖 AI模型说明

应用内置以下几种AI模型，各有特点：

| 模型名称 | 大小 | 特点 | 适用场景 |
|---------|------|------|----------|
| Stable Diffusion v1.5 | 4GB | 通用模型，体积较小 | 多种风格，适合初次尝试 |
| Stable Diffusion XL | 10GB | 高质量模型，体积较大 | 需要更高质量和细节的场景 |
| Anything v3.0 | 4GB | 动漫风格专用模型 | 二次元角色创作 |
| Dreamlike Anime | 4GB | 高质量动漫风格模型 | 精致的动漫风格角色 |
| DreamShaper v8 | 4GB | 综合性能优秀的模型 | 各种风格的角色生成 |

所有模型都从Hugging Face模型库自动下载。首次下载可能需要一些时间，下载后会存储在本地缓存中。

## 📁 项目结构

```
live2d-ai-generator/
├── modules/                  # 核心功能模块
│   ├── character_gen.py      # 角色生成模块
│   ├── layer_separator.py    # 图层分割模块
│   ├── cubism_automation.py  # Cubism自动化模块
│   ├── parameters_gen.py     # 参数生成模块
│   ├── exporter.py           # 模型导出模块
│   └── gui.py                # 图形界面模块
├── main.py                   # 主程序入口
├── gui_run.py                # GUI启动脚本
├── run.py                    # 命令行运行脚本
├── run.sh                    # Linux/macOS安装脚本
├── run.bat                   # Windows安装脚本
├── config.yml                # 配置文件
├── requirements.txt          # 依赖项列表
├── README.md                 # 项目说明
├── QUICKSTART.md             # 快速入门指南
├── output/                   # 默认输出目录
├── temp/                     # 临时文件目录
└── logs/                     # 日志文件目录
```

## ❓ 常见问题

### 安装和设置问题

**Q: 为什么安装过程中出现依赖错误？**  
A: 请确保您使用的是Python 3.8或更高版本，并且pip已更新到最新版本。某些依赖项可能需要特定的系统库，请参考错误消息进行相应安装。

**Q: 如何正确设置Cubism路径？**  
A: 在配置设置标签页中，输入Cubism.exe的完整路径。例如：
- Windows: `C:\Program Files\Live2D Cubism 4.0\app\Cubism.exe`
- macOS: `/Applications/Live2D Cubism 4.0/Cubism.app`

### 模型问题

**Q: 为什么模型下载很慢？**  
A: 模型文件较大（4-10GB），下载速度取决于您的网络连接。建议使用稳定的网络连接，并且耐心等待。

**Q: 模型下载失败怎么办？**  
A: 请检查网络连接，或尝试使用VPN。您也可以手动从Hugging Face下载模型并放入缓存目录。

**Q: 如何更改默认使用的模型？**  
A: 在配置设置标签页中选择您偏好的模型，然后点击"更新配置"按钮。

### 使用问题

**Q: 为什么角色生成失败？**  
A: 可能的原因包括：
- GPU内存不足
- 模型未正确下载
- 提示词过于复杂或有歧义
尝试使用更简单的提示词，或选择更小的模型。

**Q: 如何提高生成的角色质量？**  
A: 尝试以下方法：
- 使用更详细、具体的提示词
- 选择更高的分辨率
- 使用SDXL等高质量模型
- 生成多个样本并选择最佳结果

**Q: 图层分割不准确怎么办？**  
A: 尝试以下解决方案：
- 选择"high"质量设置
- 使用Segment Anything模型
- 确保角色图像有清晰的轮廓和对比度
- 尝试不同的部位选择组合

**Q: Cubism自动化失败怎么办？**  
A: 确保：
- Cubism路径正确设置
- Cubism版本兼容（推荐4.0或更高）
- 没有其他程序正在使用Cubism
- 图层已正确分割

## 📝 更新日志

### 版本 1.0.0 (2023-12-01)
- 初始发布
- 支持五种AI模型
- 基本图层分割功能
- Cubism自动化集成
- 用户友好的GUI界面

## 🤝 贡献指南

我们欢迎任何形式的贡献，包括但不限于：

1. 报告问题
2. 提交功能请求
3. 编写或改进文档
4. 提交代码改进

如果您想贡献代码：

1. Fork本仓库
2. 创建您的特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交您的更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 开启一个Pull Request

## 📜 许可证

本项目采用MIT许可证。详情请参阅[LICENSE](LICENSE)文件。

---

<div align="center">
  <p>Live2D AI Generator © 2023</p>
  <p>
    <a href="https://github.com/your-username/live2d-ai-generator/issues">报告问题</a> •
    <a href="https://github.com/your-username/live2d-ai-generator/wiki">文档</a> •
    <a href="mailto:your-email@example.com">联系我们</a>
  </p>
</div> 